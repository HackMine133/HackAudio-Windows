<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>HackAudio</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="app-container">
        <div class="title-bar">
            <div class="title">
                <img class="app-logo" src="icon.ico" alt="HackAudio logo">
                HackAudio
            </div>
            <div class="window-controls">
                <button id="btn-min" title="Свернуть"><i class="fas fa-minus"></i></button>
                <button id="btn-max" title="Развернуть"><i class="fas fa-square"></i></button>
                <button id="btn-close" title="Закрыть"><i class="fas fa-times"></i></button>
            </div>
        </div>

        <div class="main-display">
            <canvas id="visualizer"></canvas>
            
            <div id="cover-art" style="display: none;">
                <img id="cover-image" src="" alt="Cover" style="opacity: 0;">
                <i id="default-icon" class="fas fa-music album-placeholder"></i>
            </div>

            <div id="video-container" style="display: none;">
                <video id="main-video" controls></video>
                <div class="video-controls-overlay">
                     <button id="video-fullscreen-btn" class="vid-btn"><i class="fas fa-expand"></i> На весь экран</button>
                     <button id="close-video-btn" class="vid-btn"><i class="fas fa-times"></i> Закрыть</button>
                </div>
            </div>

            <div id="eq-window" class="modal-window">
                <div class="modal-header">
                    <span>Эквалайзер</span>
                    <button class="close-modal-btn" id="close-eq-btn"><i class="fas fa-times"></i></button>
                </div>
                <div class="eq-content">
                    <select id="eq-presets">
                        <option value="flat">Оригинал (Flat)</option>
                        <option value="bass">Bass Boost</option>
                        <option value="rock">Rock</option>
                        <option value="pop">Pop</option>
                        <option value="jazz">Jazz</option>
                        <option value="classical">Classical</option>
                        <option value="vocal">Vocal Booster</option>
                    </select>
                    <div class="eq-sliders-container" id="eq-sliders">
                        </div>
                    <button id="save-eq-preset-btn" class="modal-action-btn primary">Сохранить пресет</button>
                </div>
            </div>

            <div id="edit-window" class="modal-window">
                <div class="modal-header">
                    <span>Редактировать трек</span>
                </div>
                
                <div class="edit-content-vertical">
                    <div class="edit-cover-section">
                        <img id="edit-cover-preview" src="" alt="Cover Preview">
                        <button id="change-cover-btn" class="text-btn">Изменить обложку</button>
                        <input type="file" id="edit-cover-input" accept="image/*" style="display: none;">
                    </div>

                    <div class="input-group">
                        <label>Название трека</label>
                        <input type="text" id="edit-title-input" class="styled-input" placeholder="Введите название">
                    </div>

                    <div class="input-group">
                        <label>Исполнитель</label>
                        <input type="text" id="edit-artist-input" class="styled-input" placeholder="Введите исполнителя">
                    </div>

                    <div class="edit-actions-row">
                        <button id="cancel-edit-btn" class="modal-action-btn secondary">Отмена</button>
                        <button id="save-edit-file-btn" class="modal-action-btn primary">Сохранить как...</button>
                    </div>
                </div>
            </div>

            <div id="playlist-panel" class="playlist-panel">
                <div class="playlist-header">
                    <div class="search-container">
                        <i class="fas fa-search"></i>
                        <input type="text" id="playlist-search-input" placeholder="Поиск...">
                    </div>
                    
                    <div class="playlist-controls-group">
                        <button id="show-liked-btn" class="header-btn" title="Показать любимые">
                            <i class="fas fa-heart"></i>
                        </button>
                        <button id="play-playlist-btn" class="header-btn" title="Играть плейлист">
                            <i class="fas fa-play"></i>
                        </button>
                        <button id="add-files-btn" class="header-btn" title="Добавить треки">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                </div>
                <ul id="playlist-list">
                </ul>
            </div>

            <div id="settings-panel" class="settings-panel">
                <div class="settings-row">
                    <label for="white-theme-mode">Белая тема:</label>
                    <input type="checkbox" id="white-theme-mode">
                </div>
                <div class="settings-row">
                    <label for="auto-color-mode">Авто-цвет (по обложке):</label>
                    <input type="checkbox" id="auto-color-mode">
                </div>
                <div class="settings-row">
                    <label>Цвет темы (вручную):</label>
                    <input type="color" id="accent-color-picker" value="#2f66ca">
                </div>
                <div class="settings-row">
                    <label>Сила визуализатора:</label>
                    <input type="range" id="viz-sensitivity" min="0.5" max="3.0" step="0.1" value="1.0">
                </div>
                <div class="settings-row">
                    <label>Кол-во линий (Visualizer):</label>
                    <input type="range" id="viz-bar-count" min="32" max="256" step="32" value="128">
                </div>
                <div class="settings-row">
                    <label for="show-cover-viz">Картинка внутри визуала:</label>
                    <input type="checkbox" id="show-cover-viz">
                </div>
                <div class="settings-row">
                    <label for="bonus-volume">Бонусная громкость (200%):</label>
                    <input type="checkbox" id="bonus-volume">
                </div>
                <div class="settings-row">
                    <label for="controls-layout">Меню управления:</label>
                    <select id="controls-layout" class="styled-select">
                        <option value="bottom">Старый (Снизу)</option>
                        <option value="left">Слева</option>
                        <option value="top">Сверху</option>
                        <option value="right">Справа</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="controls-bar">
            
            <div class="controls-row">
                <div class="now-playing-panel">
                    <div class="np-cover-container">
                        <img id="now-playing-cover" src="" alt="Обложка">
                        <i id="now-playing-placeholder" class="fas fa-compact-disc"></i>
                    </div>
                    <div class="np-info">
                        <div class="np-title-row">
                            <span id="now-playing-title" class="np-title">Не играет</span>
                            <button id="now-playing-like-btn" class="icon-btn-sm" title="В любимые">
                                <i class="far fa-heart"></i>
                            </button>
                            <button id="edit-track-btn" class="icon-btn-sm" title="Редактировать">
                                <i class="fas fa-pencil-alt"></i>
                            </button>
                        </div>
                        <div id="now-playing-artist" class="np-artist">Неизвестен</div>
                        <div class="np-meta-row">
                            <span id="now-playing-position" class="np-meta">0/0</span>
                            <span class="np-dot">•</span>
                            <span id="now-playing-quality" class="np-meta">Hi-Fi</span>
                        </div>
                    </div>
                </div>

                <div class="playback-controls">
                    <div class="playback-buttons">
                        <button id="prev-btn" class="control-btn" title="Предыдущий (←)">
                            <i class="fas fa-step-backward"></i>
                        </button>
                        
                        <button id="play-pause-btn" class="control-btn big" title="Пауза/Пуск (Space)">
                            <i class="fas fa-play"></i>
                        </button>
                        
                        <button id="next-btn" class="control-btn" title="Следующий (→)">
                            <i class="fas fa-step-forward"></i>
                        </button>
                    </div>

                    <div class="seek-container compact">
                        <span id="current-time">0:00</span>
                        <input type="range" id="seek-slider" min="0" max="100" value="0">
                        <span id="duration">0:00</span>
                    </div>
                </div>

                <div class="volume-control">
                    <button id="mute-btn" class="control-btn small" title="Без звука">
                        <i class="fas fa-volume-up"></i>
                    </button>
                    <input type="range" id="volume-slider" min="0" max="100" value="50">
                    <span id="volume-text">50%</span>
                </div>
            </div>
        </div>

        <div id="side-menu" class="side-menu layout-bottom">
            <button id="settings-btn" class="control-btn" title="Настройки">
                <i class="fas fa-cog"></i>
            </button>
            <button id="eq-btn" class="control-btn" title="Эквалайзер">
                <i class="fas fa-sliders-h"></i>
            </button>
            <button id="loop-btn" class="control-btn" title="Повтор: Выкл">
                <i class="fas fa-repeat"></i>
            </button>
            <button id="add-to-playlist-btn" class="control-btn" title="Добавить в плейлист">
                <i class="fas fa-plus"></i>
            </button>
            <button id="toggle-view" class="control-btn" title="Сменить вид (F)">
                <i class="fas fa-image"></i>
            </button>
            <div class="speed-control-wrapper">
                <button id="speed-btn" class="control-btn" title="Скорость">
                    <span id="speed-display-text" style="font-size: 10px; font-weight: bold;">1.0x</span>
                </button>
                <div id="speed-popup" class="popup-slider">
                    <input type="range" id="speed-slider" min="0.5" max="3.0" step="0.1" value="1.0">
                </div>
            </div>
            <button id="toggle-playlist" class="control-btn" title="Плейлист (P)">
                <i class="fas fa-list"></i>
            </button>
        </div>
    </div>

    <input type="file" id="file-input" multiple accept="audio/*,video/*,.mid,.midi" style="display: none;">

    <script src="renderer.js"></script>
</body>
</html>
